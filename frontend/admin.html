<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Admin - Agenda Fonte da Verdade</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }

    .top {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    button {
      padding: 6px 12px;
      cursor: pointer;
    }

    input {
      padding: 5px;
      margin: 5px 0;
    }
  </style>
</head>
<body>

<div class="top">
  <h2>Painel Administrativo</h2>
  <button onclick="logout()">Sair</button>
</div>

<hr>

<p><strong>Usu√°rio logado:</strong> <span id="userName"></span></p>

<h3>Editar Datas / Conte√∫do</h3>

<label>Data:</label><br>
<input type="date" id="date"><br><br>

<label>Descri√ß√£o:</label><br>
<input type="text" id="desc" placeholder="Descri√ß√£o"><br><br>

<button onclick="salvar()">Salvar</button>

<p id="msg"></p>

<script>
  const BASE_URL = "/agenda-fonte-verdade/frontend/";

  // üîí PROTE√á√ÉO: SE N√ÉO ESTIVER LOGADO, VOLTA PARA LOGIN
  const user = localStorage.getItem("user");

  if (!user) {
    window.location.href = BASE_URL + "index.html";
  } else {
    const u = JSON.parse(user);
    document.getElementById("userName").innerText = u.user;
  }

  function logout() {
    localStorage.removeItem("user");
    window.location.href = BASE_URL + "index.html";
  }

  function salvar() {
    const date = document.getElementById("date").value;
    const desc = document.getElementById("desc").value;

    if (!date || !desc) {
      document.getElementById("msg").innerText = "Preencha todos os campos";
      return;
    }

    // Simula√ß√£o de salvamento
    document.getElementById("msg").innerText =
      "Salvo com sucesso: " + date + " - " + desc;
  }
</script>

</body>
</html>
